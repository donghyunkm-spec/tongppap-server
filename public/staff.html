<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>통빱 관리 시스템</title>
    <link rel="stylesheet" href="style.css"> </head>
<body>
    <div id="loginOverlay" class="modal-overlay" style="display:flex;">
        <div class="modal-box">
            <h2>🔐 통빱 관리자 로그인</h2>
            <div class="modal-field">
                <input type="text" id="loginId" placeholder="아이디" style="width:100%; padding:10px; margin-bottom:5px;">
                <input type="password" id="loginPw" placeholder="비밀번호" style="width:100%; padding:10px;">
            </div>
            <button class="btn" onclick="doLogin()" style="width:100%; background:#28a745;">로그인</button>
        </div>
    </div>

    <div class="container" id="mainContent" style="display:none;">
        <div class="header">
            <div style="display: flex; justify-content: space-between; align-items: center;">
                <h1 id="pageTitle">🍙 통빱 관리시스템</h1>
                <div>
                    <span id="userInfo" style="font-size:12px; margin-right:10px; color:white;"></span>
                    <button onclick="doLogout()" style="font-size:12px; padding:3px 8px;">로그아웃</button>
                </div>
            </div>
        </div>

        <div class="tabs">
            <button class="tab active" onclick="switchTab('schedule')">근무일정</button>
            <button class="tab admin-only" onclick="switchTab('accounting')">매입/매출</button>
            <button class="tab admin-only" onclick="switchTab('analysis')">손익분석</button>
        </div>

        <div id="schedule-content" class="tab-content active">
            <div class="status-container">
                <h3>📅 근무 일정</h3>
                <div id="scheduleList"></div>
            </div>
        </div>

        <div id="accounting-content" class="tab-content">
            <div class="status-container">
                <div style="margin-bottom:15px; text-align:center;">
                    <input type="date" id="accDate" onchange="loadDailyData()" style="padding:5px; font-size:16px;">
                    <button onclick="saveDailyData()" style="background:#007bff; color:white; border:none; padding:5px 10px; border-radius:5px;">저장하기</button>
                </div>

                <div style="display:grid; grid-template-columns: 1fr 1fr; gap:10px;">
                    <div class="accounting-card" style="background:#e3f2fd;">
                        <h4>⚾ 통빱 1루 매출</h4>
                        <div class="input-group-row"><span>카드</span><input type="number" id="b1_card" class="money-input"></div>
                        <div class="input-group-row"><span>현금</span><input type="number" id="b1_cash" class="money-input"></div>
                        <div class="input-group-row"><span>배달타자</span><input type="number" id="b1_deliv" class="money-input"></div>
                    </div>
                    <div class="accounting-card" style="background:#fff3e0;">
                        <h4>⚾ 통빱 3루 매출</h4>
                        <div class="input-group-row"><span>카드</span><input type="number" id="b3_card" class="money-input"></div>
                        <div class="input-group-row"><span>현금</span><input type="number" id="b3_cash" class="money-input"></div>
                        <div class="input-group-row"><span>배달타자</span><input type="number" id="b3_deliv" class="money-input"></div>
                    </div>
                </div>

                <div class="accounting-card" style="margin-top:15px; border-top:3px solid #dc3545;">
                    <h4>💸 공통 일일 지출 (자동 배분됨)</h4>
                    <div class="input-grid">
                        <div><span>🚚 고센유통</span><input type="number" id="ex_gosen" class="money-input"></div>
                        <div><span>🥩 한강유통</span><input type="number" id="ex_hangang" class="money-input"></div>
                        <div><span>🎸 기타잡비</span><input type="number" id="ex_etc" class="money-input"></div>
                    </div>
                    <div style="margin-top:10px;">
                        <span>📝 특이사항</span><input type="text" id="ex_note" style="width:100%;">
                    </div>
                </div>
            </div>

            <div class="status-container" style="margin-top:20px;">
                <h3>🏗️ 월 고정비 설정 ( <span id="fixMonthDisplay"></span> )</h3>
                <div class="tabs" style="grid-template-columns: 1fr 1fr; margin-bottom:10px;">
                    <button class="tab active" onclick="showFixTab('base1', this)">1루 고정비</button>
                    <button class="tab" onclick="showFixTab('base3', this)">3루 고정비</button>
                </div>

                <div id="fixFormArea" class="accounting-card">
                    <div class="input-grid">
                        <div><span style="color:red; font-weight:bold;">매장수수료(30%)</span><input type="text" id="fix_comm" disabled placeholder="자동계산"></div>
                        <div><span style="color:red; font-weight:bold;">배달수수료(4.95%)</span><input type="text" id="fix_deliv" disabled placeholder="자동계산"></div>
                        <div><span>인터넷</span><input type="number" id="fix_net" class="money-input"></div>
                        <div><span>전기료</span><input type="number" id="fix_elec" class="money-input"></div>
                        <div><span>청소용역</span><input type="number" id="fix_clean" class="money-input"></div>
                        <div><span>카드수수료</span><input type="number" id="fix_card" class="money-input"></div>
                        <div><span>운영관리비</span><input type="number" id="fix_oper" class="money-input"></div>
                        <div><span>캡스</span><input type="number" id="fix_caps" class="money-input"></div>
                        <div><span>기타1</span><input type="number" id="fix_etc1" class="money-input"></div>
                        <div><span>기타2</span><input type="number" id="fix_etc2" class="money-input"></div>
                    </div>
                    <button onclick="saveFixedCost()" style="width:100%; margin-top:10px; background:#6c757d; color:white; padding:10px;">고정비 저장</button>
                </div>
            </div>
        </div>

        <div id="analysis-content" class="tab-content">
            <div class="status-container">
                <div style="text-align:center; margin-bottom:15px;">
                    <input type="month" id="anMonth" onchange="loadAnalysis()" style="font-size:16px;">
                </div>
                <div class="tabs" style="grid-template-columns: 1fr 1fr 1fr; margin-bottom:10px;">
                    <button class="tab active" onclick="renderAnalysis('base1', this)">1루 분석</button>
                    <button class="tab" onclick="renderAnalysis('base3', this)">3루 분석</button>
                    <button class="tab" onclick="renderAnalysis('combined', this)">통합 분석</button>
                </div>
                
                <div id="analysisResult" class="accounting-card">
                    </div>
            </div>
        </div>
    </div>
    <script src="staff.js"></script>
</body>
</html>